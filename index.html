<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Night Canteen - Order delicious food online from 10 PM to 1 AM. Quick delivery to your room."
    />
    <meta
      name="keywords"
      content="night canteen, food delivery, late night snacks, hostel food, online ordering"
    />
    <meta name="author" content="Night Canteen" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="#" />
    <meta property="og:title" content="Night Canteen - Order Online" />
    <meta
      property="og:description"
      content="Delicious food delivered to your room from 10 PM to 1 AM"
    />
    <meta
      property="og:image"
      content="https://via.placeholder.com/1200x630?text=Night+Canteen"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:title" content="Night Canteen - Order Online" />
    <meta
      property="twitter:description"
      content="Delicious food delivered to your room from 10 PM to 1 AM"
    />

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/x-icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåô</text></svg>"
    />

    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://script.google.com" />

    <title>üåô Night Canteen - Order Online | Open 10 PM - 1 AM</title>

    <!-- Critical CSS inlined for faster loading -->
    <style>
      /* Critical loading styles */
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }

      header {
        background: rgba(44, 62, 80, 0.95);
        color: white;
        text-align: center;
        padding: 2rem 1rem;
      }

      .loading-skeleton {
        background: linear-gradient(
          90deg,
          #f0f0f0 25%,
          #e0e0e0 50%,
          #f0f0f0 75%
        );
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
      }

      @keyframes loading {
        0% {
          background-position: 200% 0;
        }
        100% {
          background-position: -200% 0;
        }
      }

      .hidden {
        display: none !important;
      }
    </style>

    <!-- Load main stylesheet -->
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link" aria-label="Skip to main content"
      >Skip to main content</a
    >

    <!-- Header with enhanced semantics -->
    <header role="banner">
      <h1>
        <span class="logo-icon" aria-hidden="true">üåô</span>
        Night Canteen
      </h1>
      <p class="tagline">
        <span class="hours">Open from 10 PM to 1 AM</span>
        <span class="status-indicator" id="status-indicator" aria-live="polite">
          <span class="status-dot"></span>
          <span id="status-text">Checking status...</span>
        </span>
      </p>
    </header>

    <!-- Main content area -->
    <main id="main-content" role="main">
      <!-- Menu Section -->
      <section id="menu" class="section" aria-labelledby="menu-heading">
        <header class="section-header">
          <h2 id="menu-heading">
            <span aria-hidden="true">üçú</span>
            Our Menu
            <span
              class="menu-count"
              id="menu-count"
              aria-label="number of items"
            ></span>
          </h2>
          <p class="section-description">
            Choose from our delicious selection of late-night treats
          </p>
        </header>

        <!-- Loading skeleton for menu items -->
        <div id="menu-loading" class="menu-loading" aria-hidden="true">
          <div class="loading-skeleton item-skeleton"></div>
          <div class="loading-skeleton item-skeleton"></div>
          <div class="loading-skeleton item-skeleton"></div>
        </div>

        <!-- Menu items container -->
        <div
          id="menu-items"
          class="items-container"
          role="grid"
          aria-label="Menu items"
        ></div>
      </section>

      <!-- Order Summary Section -->
      <section
        id="order-summary"
        class="section"
        aria-labelledby="order-heading"
      >
        <header class="section-header">
          <h2 id="order-heading">
            <span aria-hidden="true">üõí</span>
            Your Order
            <span
              class="item-count"
              id="order-item-count"
              aria-live="polite"
            ></span>
          </h2>
        </header>

        <div
          id="selected-items"
          aria-live="polite"
          aria-label="Selected items"
        ></div>

        <button
          id="proceed-to-order"
          class="primary-button"
          disabled
          aria-describedby="proceed-help"
        >
          <span class="button-icon" aria-hidden="true">‚û°Ô∏è</span>
          Proceed to Order
        </button>
        <div id="proceed-help" class="help-text">
          Add items to your order to continue
        </div>
      </section>

      <!-- Order Form Section -->
      <section
        id="order-form"
        class="section hidden"
        aria-labelledby="form-heading"
      >
        <header class="section-header">
          <h2 id="form-heading">
            <span aria-hidden="true">üìù</span>
            Complete Your Order
          </h2>
          <p class="section-description">
            Please provide your details for delivery
          </p>
        </header>

        <form
          id="customer-order-form"
          novalidate
          role="form"
          aria-labelledby="form-heading"
        >
          <div class="form-group">
            <label for="name" class="required">
              Full Name
              <span class="required-asterisk" aria-label="required">*</span>
            </label>
            <input
              type="text"
              id="name"
              name="name"
              required
              autocomplete="name"
              aria-describedby="name-help name-error"
              placeholder="Enter your full name"
            />
            <div id="name-help" class="help-text">
              Enter your complete name as registered
            </div>
            <div
              id="name-error"
              class="error-text"
              role="alert"
              aria-live="polite"
            ></div>
          </div>

          <div class="form-group">
            <label for="room" class="required">
              Room Number
              <span class="required-asterisk" aria-label="required">*</span>
            </label>
            <input
              type="text"
              id="room"
              name="room"
              required
              aria-describedby="room-help room-error"
              placeholder="e.g., 101A, B-204"
              pattern="[A-Za-z0-9\-]+"
            />
            <div id="room-help" class="help-text">
              Include block/wing if applicable (e.g., A-101, B-204)
            </div>
            <div
              id="room-error"
              class="error-text"
              role="alert"
              aria-live="polite"
            ></div>
          </div>

          <div class="form-group">
            <label for="mobile" class="required">
              Mobile Number
              <span class="required-asterisk" aria-label="required">*</span>
            </label>
            <input
              type="tel"
              id="mobile"
              name="mobile"
              required
              autocomplete="tel"
              aria-describedby="mobile-help mobile-error"
              placeholder="10-digit mobile number"
              pattern="[0-9]{10}"
              maxlength="10"
            />
            <div id="mobile-help" class="help-text">
              Enter 10-digit mobile number without country code
            </div>
            <div
              id="mobile-error"
              class="error-text"
              role="alert"
              aria-live="polite"
            ></div>
          </div>

          <div class="form-group">
            <label for="special-instructions">
              Special Instructions
              <span class="optional-text">(Optional)</span>
            </label>
            <textarea
              id="special-instructions"
              name="specialInstructions"
              rows="3"
              maxlength="200"
              aria-describedby="instructions-help"
              placeholder="Any special requests or delivery instructions..."
            ></textarea>
            <div id="instructions-help" class="help-text">
              Any specific preferences or delivery notes (max 200 characters)
            </div>
          </div>

          <div class="form-group">
            <fieldset>
              <legend>Order Summary</legend>
              <div
                id="order-items-list"
                class="order-summary-box"
                aria-label="Order summary"
              ></div>
            </fieldset>
          </div>

          <button
            type="submit"
            id="submit-order"
            class="primary-button submit-button"
            aria-describedby="submit-help"
          >
            <span class="button-icon" aria-hidden="true">üöÄ</span>
            <span class="button-text">Place Order</span>
            <span class="loading-spinner" aria-hidden="true"></span>
          </button>
          <div id="submit-help" class="help-text">
            By placing this order, you agree to our terms of service
          </div>
        </form>
      </section>

      <!-- Thank You Section -->
      <section
        id="thank-you"
        class="section hidden"
        aria-labelledby="thankyou-heading"
      >
        <div class="success-animation" aria-hidden="true">
          <div class="success-checkmark">
            <div class="check-icon">
              <span class="icon-line line-tip"></span>
              <span class="icon-line line-long"></span>
              <div class="icon-circle"></div>
              <div class="icon-fix"></div>
            </div>
          </div>
        </div>

        <header class="section-header">
          <h2 id="thankyou-heading" class="success-heading">
            Order Placed Successfully! üéâ
          </h2>
          <p class="success-message">
            Thank you for your order! We'll prepare it fresh and deliver it to
            your room shortly.
          </p>
        </header>

        <div class="order-status" aria-live="polite">
          <div class="status-item">
            <span class="status-icon">‚è±Ô∏è</span>
            <div class="status-content">
              <h3>Estimated Delivery</h3>
              <p id="delivery-estimate">15-20 minutes</p>
            </div>
          </div>
          <div class="status-item">
            <span class="status-icon">üì±</span>
            <div class="status-content">
              <h3>Contact</h3>
              <p>We'll call you if we need directions</p>
            </div>
          </div>
        </div>

        <div class="action-buttons">
          <button
            id="download-bill"
            class="secondary-button"
            aria-describedby="download-help"
          >
            <span class="button-icon" aria-hidden="true">üìÑ</span>
            Download Receipt
          </button>
          <div id="download-help" class="help-text">
            Save a copy of your order receipt
          </div>
        </div>

        <!-- Feedback Section -->
        <section id="feedback-section" aria-labelledby="feedback-heading">
          <header>
            <h3 id="feedback-heading">
              <span aria-hidden="true">‚≠ê</span>
              How was your experience?
            </h3>
            <p>Your feedback helps us serve you better!</p>
          </header>

          <div class="feedback-form">
            <label for="feedback-text" class="sr-only">Your feedback</label>
            <textarea
              id="feedback-text"
              placeholder="Share your experience with us..."
              rows="4"
              maxlength="500"
              aria-describedby="feedback-help"
            ></textarea>
            <div id="feedback-help" class="help-text">
              Tell us what you loved or how we can improve (max 500 characters)
            </div>

            <button
              id="submit-feedback"
              class="secondary-button"
              aria-describedby="feedback-submit-help"
            >
              <span class="button-icon" aria-hidden="true">üí¨</span>
              Submit Feedback
            </button>
            <div id="feedback-submit-help" class="help-text">
              Your feedback is anonymous and helps us improve
            </div>
          </div>
        </section>

        <div class="new-order-section">
          <button
            id="new-order"
            class="primary-button"
            aria-describedby="new-order-help"
          >
            <span class="button-icon" aria-hidden="true">üõí</span>
            Place New Order
          </button>
          <div id="new-order-help" class="help-text">
            Start fresh with a new order
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer role="contentinfo">
      <div class="footer-content">
        <div class="footer-section">
          <h3>üåô Night Canteen</h3>
          <p>Late-night hunger? Grab your packed snacks here.</p>
        </div>

        <div class="footer-section">
          <h4>Hours</h4>
          <p>
            <time>10:00 PM</time> - <time>1:00 AM</time><br />
            <small>7 days a week</small>
          </p>
        </div>

        <div class="footer-section">
          <h4>Contact</h4>
          <p>
            <a href="tel:+919341320141" class="contact-link"> üìû 9341320141 </a>
          </p>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2025 Night Canteen. Made with ‚ù§Ô∏è for late-night cravings.</p>
        <p>
          <small>
            <a href="#privacy" class="footer-link">Privacy Policy</a> |
            <a href="#terms" class="footer-link">Terms of Service</a>
          </small>
        </p>
      </div>
    </footer>

    <!-- Screen reader announcements -->
    <div
      id="announcements"
      aria-live="assertive"
      aria-atomic="true"
      class="sr-only"
    ></div>

    <!-- Scripts -->
    <script src="form-handler.js" defer></script>
    <script src="script.js" defer></script>

    <!-- Service Worker Registration (for future PWA features) -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function () {
          // Uncomment when you add a service worker
          // navigator.serviceWorker.register('/sw.js');
        });
      }
    </script>

    <!-- Enhanced Error Boundary -->
    <script>
      window.addEventListener("error", function (e) {
        console.error("Global error:", e.error);

        // Show user-friendly error message
        const notification = document.createElement("div");
        notification.className = "notification error";
        notification.innerHTML = `
                <span class="notification-text">Something went wrong. Please refresh the page.</span>
                <button class="notification-close" onclick="this.parentElement.remove()">√ó</button>
            `;
        document.body.appendChild(notification);

        // Auto-remove after 5 seconds
        setTimeout(() => {
          if (notification.parentElement) {
            notification.remove();
          }
        }, 5000);
      });

      window.addEventListener("unhandledrejection", function (e) {
        console.error("Unhandled promise rejection:", e.reason);
      });
    </script>

    <!-- Accessibility enhancements -->
    <style>
      /* Screen reader only content */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      /* Skip link */
      .skip-link {
        position: absolute;
        top: -40px;
        left: 6px;
        background: #000;
        color: white;
        padding: 8px;
        text-decoration: none;
        border-radius: 4px;
        z-index: 10000;
      }

      .skip-link:focus {
        top: 6px;
      }

      /* Focus indicators */
      button:focus,
      input:focus,
      textarea:focus,
      a:focus {
        outline: 2px solid #005fcc;
        outline-offset: 2px;
      }

      /* High contrast mode support */
      @media (prefers-contrast: high) {
        :root {
          --primary-color: #000000;
          --secondary-color: #0000ff;
          --accent-color: #008000;
        }
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
    </style>
  </body>
</html>
